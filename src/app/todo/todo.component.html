<div cdkDropListGroup>
  <div
    cdkDropList
    #todoList="cdkDropList"
    [cdkDropListData]="tasksToTodo"
    class="example-list"
    (cdkDropListDropped)="dropInTodo($event)">
    <mat-card class="main-card">TODO
      <mat-icon class="icon-display" (click)="addPostForm()">add</mat-icon>
      <mat-expansion-panel hideToggle *ngIf="addPost" [expanded]="true">
        <mat-form-field style="white-space: pre-wrap;">
        <textarea
          [(ngModel)]="enteredContent"
          id="content"
          matInput rows="6"
          name="content"
          required
          placeholder="Deine Todo"
          #content="ngModel">
        </textarea>
          <mat-error *ngIf="content.invalid">Notizen eingeben</mat-error>
        </mat-form-field>
        <mat-action-row>
          <button
            mat-raised-button *ngIf=true matSuffix
            type="submit" (click)=addTask(goalid)>Save
          </button>
        </mat-action-row>
      </mat-expansion-panel>
      <div class="style" *ngIf="tasksToTodo.length > 0">
        <mat-card class="small-card" *ngFor="let task of tasksToTodo" cdkDrag>
          <p *ngIf="!edit">{{ task.description }}</p>
          <form [formGroup]="todoForm" (ngSubmit)="onFormSubmit(task._id)">
            <textarea
              rows="5"
              *ngIf="edit"
              (keyup.enter)="editOnOff()"
              (keyup.enter)="onFormSubmit(task._id)"
              (keyup.esc)="editOnOff()"
              type="submit"
              placeholder="{{ task.description }}"
              formControlName="description"
              [(ngModel)]="task.description"
            >{{ task.description }}</textarea>
          </form>
          <button mat-button color="primary" class="button-styling" (click)="editOnOff()">
            <mat-icon class="icon-styling">edit</mat-icon>
          </button>
          <button mat-button color="warn" (click)="deleteDialog(task._id)" class="button-styling">
            <mat-icon class="icon-styling2">delete</mat-icon>
          </button>
        </mat-card>
      </div>
    </mat-card>
  </div>

  <div
    cdkDropList
    #doingList="cdkDropList"
    [cdkDropListData]="tasksToDoing"
    class="example-list"
    (cdkDropListDropped)="dropInDoing($event)">
    <mat-card class="main-card">DOING
      <div *ngIf="tasksToDoing.length > 0">
        <mat-card class="small-card" *ngFor="let task of tasksToDoing" cdkDrag>
          <p *ngIf="!edit">{{ task.description }}</p>
          <form [formGroup]="todoForm" (ngSubmit)="onFormSubmit(task._id)">
            <textarea
              rows="5"
              *ngIf="edit"
              (keyup.enter)="editOnOff()"
              (keyup.enter)="onFormSubmit(task._id)"
              (keyup.esc)="editOnOff()"
              type="submit"
              placeholder="{{ task.description }}"
              formControlName="description"
              [(ngModel)]="task.description"
            >{{ task.description }}</textarea>
          </form>
          <button mat-button color="primary" class="style4" (click)="editOnOff()">
            <mat-icon class="style5">edit</mat-icon>
          </button>
          <button mat-button color="warn" (click)="deleteDialog(task._id)" class="style4">
            <mat-icon class="style5">delete</mat-icon>
          </button>
        </mat-card>
      </div>
    </mat-card>
  </div>

  <div
    cdkDropList
    #doneList="cdkDropList"
    [cdkDropListData]="tasksToDone"
    class="example-list"
    (cdkDropListDropped)="dropInDone($event)">
    <mat-card class="main-card">DONE
      <div *ngIf="tasksToDone.length > 0">
        <mat-card class="small-card" *ngFor="let task of tasksToDone" cdkDrag>
          <p *ngIf="!edit">{{ task.description }}</p>
          <form [formGroup]="todoForm" (ngSubmit)="onFormSubmit(task._id)">
            <textarea
              rows="5"
              *ngIf="edit"
              (keyup.enter)="editOnOff()"
              (keyup.enter)="onFormSubmit(task._id)"
              (keyup.esc)="editOnOff()"
              type="submit"
              placeholder="{{ task.description }}"
              formControlName="description"
              [(ngModel)]="task.description"
            >{{ task.description }}</textarea>
          </form>
          <button mat-button color="primary" class="style4" (click)="editOnOff()">
            <mat-icon class="style5">edit</mat-icon>
          </button>
          <button mat-button color="warn" (click)="deleteDialog(task._id)" class="style4">
            <mat-icon class="style5">delete</mat-icon>
          </button>
        </mat-card>
      </div>
    </mat-card>
  </div>
</div>

